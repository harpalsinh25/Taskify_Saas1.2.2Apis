name: 'Workspace Managemant'
description: |-
  This endpoint allows authenticated users to create a new workspace. It automatically associates users and clients,
  sets the workspace as primary (if requested), and logs activity. Notifications are sent to the participants.
endpoints:
  -
    httpMethods:
      - POST
    uri: api/master-panel/workspace
    metadata:
      groupName: 'Workspace Managemant'
      groupDescription: |-
        This endpoint allows authenticated users to create a new workspace. It automatically associates users and clients,
        sets the workspace as primary (if requested), and logs activity. Notifications are sent to the participants.
      subgroup: ''
      subgroupDescription: ''
      title: 'Create a new workspace'
      description: ''
      authenticated: false
      custom: []
    headers:
      Authorization: 'Bearer 40|dbscqcapUOVnO7g5bKWLIJ2H2zBM0CBUH218XxaNf548c4f1'
      Accept: application/json
      workspace_id: '2'
      Content-Type: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      title:
        name: title
        description: 'The name of the workspace.'
        required: true
        example: 'Design Team'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      user_ids:
        name: user_ids
        description: 'List of user IDs to attach to the workspace.'
        required: false
        example:
          - 3
          - 5
        type: 'string[]'
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      client_ids:
        name: client_ids
        description: 'List of client IDs to attach to the workspace.'
        required: false
        example:
          - 101
          - 102
        type: 'string[]'
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      primaryWorkspace:
        name: primaryWorkspace
        description: 'Indicates if this workspace should be set as the primary workspace.'
        required: false
        example: true
        type: boolean
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      isApi:
        name: isApi
        description: 'Optional flag to return API-formatted response.'
        required: false
        example: true
        type: boolean
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      title: 'Design Team'
      user_ids:
        - 3
        - 5
      client_ids:
        - 101
        - 102
      primaryWorkspace: true
      isApi: true
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "error": false,
            "message": "Workspace created successfully.",
            "id": 438,
            "data": {
              "id": 438,
              "title": "Design Team",
              "is_primary": true,
              "users": [
                {
                  "id": 7,
                  "first_name": "Madhavan",
                  "last_name": "Vaidya",
                  "photo": "https://yourdomain.com/storage/photos/user.png"
                }
              ],
              "clients": [
                {
                  "id": 103,
                  "first_name": "Test",
                  "last_name": "Test",
                  "photo": "https://yourdomain.com/storage/photos/no-image.jpg"
                }
              ],
              "created_at": "07-08-2024 14:38:51",
              "updated_at": "07-08-2024 14:38:51"
            }
          }
        headers: []
        description: ''
        custom: []
      -
        status: 422
        content: |-
          {
            "message": "The given data was invalid.",
            "errors": {
              "title": [
                "The title field is required."
              ]
            }
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - PUT
    uri: 'api/master-panel/workspace/{id}'
    metadata:
      groupName: 'Workspace Managemant'
      groupDescription: |-
        Updates the details of an existing workspace such as title, primary status,
        assigned users, and clients. It also handles updating notifications for newly added members.
      subgroup: ''
      subgroupDescription: ''
      title: 'Update an existing workspace'
      description: ''
      authenticated: false
      custom: []
    headers:
      Authorization: 'Bearer 40|dbscqcapUOVnO7g5bKWLIJ2H2zBM0CBUH218XxaNf548c4f1'
      Accept: application/json
      workspace_id: '2'
      Content-Type: application/json
    urlParameters:
      id:
        name: id
        description: 'The ID of the workspace.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
    cleanUrlParameters:
      id: 1
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      id:
        name: id
        description: 'The ID of the workspace.'
        required: true
        example: 12
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      title:
        name: title
        description: 'The updated title of the workspace.'
        required: true
        example: 'Design Team'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      user_ids:
        name: user_ids
        description: 'optional List of user IDs to associate with the workspace.'
        required: false
        example:
          - 1
          - 3
        type: 'string[]'
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      client_ids:
        name: client_ids
        description: 'optional List of client IDs to associate with the workspace.'
        required: false
        example:
          - 101
          - 104
        type: 'string[]'
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      primaryWorkspace:
        name: primaryWorkspace
        description: 'optional Whether this workspace is set as the primary one.'
        required: false
        example: true
        type: boolean
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      id: 12
      title: 'Design Team'
      user_ids:
        - 1
        - 3
      client_ids:
        - 101
        - 104
      primaryWorkspace: true
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
             "error": false,
             "id": 12,
             "message": "Workspace updated successfully.",
             "data": {
               "id": 12,
               "title": "Design Team",
               "is_primary": true,
               "users": [
                 {
                   "id": 3,
                   "first_name": "Alice",
                   "last_name": "Doe",
                   "photo": "https://example.com/photos/user3.jpg"
                 }
               ],
               "clients": [
                 {
                   "id": 101,
                   "first_name": "Bob",
                   "last_name": "Client",
                   "photo": "https://example.com/photos/client101.jpg"
                 }
               ],
               "created_at": "07-08-2024 14:38:51",
               "updated_at": "07-08-2024 15:10:02"
             }
          }
        headers: []
        description: ''
        custom: []
      -
        status: 422
        content: |-
          {
             "error": true,
             "message": "Validation failed.",
             "errors": {
               "title": [
                 "The title field is required."
               ],
               "id": [
                 "The selected id is invalid."
               ]
             }
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - DELETE
    uri: 'api/master-panel/workspace/{id}'
    metadata:
      groupName: 'Workspace Managemant'
      groupDescription: "This API deletes a workspace by its ID, if it's not the currently active workspace."
      subgroup: ''
      subgroupDescription: ''
      title: 'Delete a workspace'
      description: ''
      authenticated: false
      custom: []
    headers:
      Authorization: 'Bearer 40|dbscqcapUOVnO7g5bKWLIJ2H2zBM0CBUH218XxaNf548c4f1'
      Accept: application/json
      workspace_id: '2'
      Content-Type: application/json
    urlParameters:
      id:
        name: id
        description: 'The ID of the workspace.'
        required: true
        example: 12
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanUrlParameters:
      id: 12
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
          "error": false,
            "message": "Workspace deleted successfully.",
             "id": "3",
             "title": "Design Team Workspace",
             "data": []
          }
        headers: []
        description: ''
        custom: []
      -
        status: 400
        content: |-
          {
            "error": true,
            "message": "Cannot delete the currently active workspace."
          }
        headers: []
        description: ''
        custom: []
      -
        status: 404
        content: |-
          {
            "error": true,
            "message": "Workspace not found or already deleted."
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - GET
    uri: 'api/master-panel/workspace/{id?}'
    metadata:
      groupName: 'Workspace Managemant'
      groupDescription: |-
        This endpoint retrieves all workspaces associated with the currently authenticated admin,
        including their related users and clients. It supports filtering by search, sorting, and pagination.
        If an ID is provided, it returns the details of that specific workspace.
      subgroup: ''
      subgroupDescription: ''
      title: 'Get a list of workspaces or a specific workspace.'
      description: ''
      authenticated: false
      custom: []
    headers:
      Authorization: 'Bearer 40|dbscqcapUOVnO7g5bKWLIJ2H2zBM0CBUH218XxaNf548c4f1'
      Accept: application/json
      workspace_id: '2'
      Content-Type: application/json
    urlParameters:
      id:
        name: id
        description: 'optional The ID of the workspace to retrieve.'
        required: false
        example: 17
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
    cleanUrlParameters:
      id: 17
    queryParameters:
      search:
        name: search
        description: 'optional Search by workspace title or ID.'
        required: false
        example: first
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      sort:
        name: sort
        description: 'optional Column to sort by. Default is "id".'
        required: false
        example: title
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      order:
        name: order
        description: 'optional Sort direction ("ASC" or "DESC"). Default is "DESC".'
        required: false
        example: ASC
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      limit:
        name: limit
        description: 'optional Number of results per page. Default is 10.'
        required: false
        example: 20
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      isApi:
        name: isApi
        description: 'optional Set true if called from API. Default is true.'
        required: false
        example: false
        type: boolean
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
    cleanQueryParameters:
      search: first
      sort: title
      order: ASC
      limit: 20
      isApi: false
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
           "error": false,
           "message": "Workspaces retrieved successfully.",
           "total": 2,
           "data": [
               {
                   "id": 1,
                   "title": "Marketing Team",
                   "is_primary": true,
                   "users": [
                       {
                           "id": 2,
                           "first_name": "Jane",
                           "last_name": "Doe",
                           "photo": "http://localhost:8000/storage/photos/no-image.jpg"
                       }
                   ],
                   "clients": [
                       {
                           "id": 5,
                           "first_name": "Client",
                           "last_name": "One",
                           "photo": "http://localhost:8000/storage/photos/no-image.jpg"
                       }
                   ],
                   "created_at": "2025-05-19 09:53:37",
                   "updated_at": "2025-06-05 11:35:18"
               }
           ]
          }
        headers: []
        description: ''
        custom: []
      -
        status: 200
        content: |-
          {
           "error": false,
           "message": "Workspace retrieved successfully.",
           "data": {
               "id": 2,
               "title": "Design Department",
               "is_primary": false,
               "users": [...],
               "clients": [...],
               "created_at": "2025-05-19 09:53:37",
               "updated_at": "2025-06-05 11:35:18"
           }
          }
        headers: []
        description: ''
        custom: []
      -
        status: 404
        content: |-
          {
           "error": true,
           "message": "No query results for model [App\\Models\\Workspace] 999.",
           "data": []
          }
        headers: []
        description: ''
        custom: []
      -
        status: 500
        content: |-
          {
           "error": true,
           "message": "Internal Server Error",
           "data": []
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth: []
    controller: null
    method: null
    route: null
    custom: []
